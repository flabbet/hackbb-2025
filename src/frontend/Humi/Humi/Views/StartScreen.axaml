<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:lvc="using:LiveChartsCore.SkiaSharpView.Avalonia"
        xmlns:fluent="using:FluentIcons.Avalonia"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewModels="clr-namespace:Humi.ViewModels"
        xmlns:system="clr-namespace:System;assembly=System.Runtime"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="Humi.Views.StartScreen"
        x:DataType="viewModels:StartScreenViewModel"
        Title="StartScreen">
  
  <Design.DataContext>
    <!-- This only sets the DataContext for the previewer in an IDE,
             to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
    <viewModels:StartScreenViewModel />
  </Design.DataContext>
  <Window.Resources>
    <Color x:Key="BgColor">#1c1c1c</Color>
    <Color x:Key="PanelColor">#262626</Color>
    <Color x:Key="CardColor">#2F2F2F</Color>
    <Color x:Key="MutedCardColor">#333333</Color>
    <Color x:Key="AccentGreen">#43724F</Color>
    <Color x:Key="AccentLightGreen">#7BB073</Color>
    <Color x:Key="TextPrimary">#FFFFFF</Color>
    <Color x:Key="TextMuted">#A8A8A8</Color>

    <SolidColorBrush x:Key="WindowBackground" Color="{StaticResource BgColor}" />
    <SolidColorBrush x:Key="PanelBrush" Color="{StaticResource PanelColor}" />
    <SolidColorBrush x:Key="CardBrush" Color="{StaticResource CardColor}" />
    <SolidColorBrush x:Key="MutedCardBrush" Color="{StaticResource MutedCardColor}" />
    <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentGreen}" />
    <SolidColorBrush x:Key="AccentLightBrush" Color="{StaticResource AccentLightGreen}" />
    <SolidColorBrush x:Key="PrimaryText" Color="{StaticResource TextPrimary}" />
    <SolidColorBrush x:Key="MutedText" Color="{StaticResource TextMuted}" />
  </Window.Resources>
  <Window.Styles>
    
    <Style Selector="TextBlock.title">
      <Setter Property="Foreground" Value="{StaticResource PrimaryText}" />
      <Setter Property="FontSize" Value="28" />
      <Setter Property="FontWeight" Value="Bold" />
    </Style>

    <Style Selector="TextBlock.appTextBlock">
      <Setter Property="FontFamily" Value="Montserrat" />
    </Style>

    <Style Selector="Border.card">
      <Setter Property="Background" Value="{StaticResource CardBrush}" />
      <Setter Property="CornerRadius" Value="12" />
      <Setter Property="Padding" Value="18" />
    </Style>

    <Style Selector="Border.smallcard">
      <Setter Property="Background" Value="{StaticResource MutedCardBrush}" />
      <Setter Property="CornerRadius" Value="10" />
      <Setter Property="Padding" Value="12" />
    </Style>

    <Style Selector="Button.primary">
      <Setter Property="Background" Value="{StaticResource AccentBrush}" />
      <Setter Property="Foreground" Value="{StaticResource PrimaryText}" />
      <Setter Property="FontWeight" Value="SemiBold" />
      <Setter Property="Padding" Value="14,12" />
      <Setter Property="CornerRadius" Value="10" />
      <Setter Property="BorderBrush" Value="{StaticResource AccentBrush}" />
    </Style>
  </Window.Styles>

  <Grid RowDefinitions="120,*" ColumnDefinitions="*" Background="{StaticResource BgColor}">
    <Border Grid.Row="0" Padding="20" CornerRadius="0,0,12,12">
      <Grid ColumnDefinitions="1*, 2*">
        <StackPanel Orientation="Horizontal" Grid.ColumnSpan="2" HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="16">
          <Image Source="/Assets/Humi.png"
                 Width="92" Height="92" Stretch="UniformToFill"/>
          <TextBlock Text="Humi" FontSize="56" VerticalAlignment="Center" Classes="appTextBlock"
                     Foreground="{StaticResource AccentBrush}" FontWeight="Bold" Margin="6,0,0,0"/>
        </StackPanel>
        <StackPanel Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Center" Orientation="Horizontal" Spacing="12">
        </StackPanel>
      </Grid>
    </Border>

    <Grid Grid.Row="1" Margin="24" ColumnDefinitions="380,16,*">
      <StackPanel Grid.Column="0" Spacing="18">
        <Button IsVisible="{Binding !IsMetupAnalysisActive}" Background="#3A5A40" Classes="primary appTextBlock" HorizontalAlignment="Stretch" MinHeight="56" Command="{Binding StartAnalysisCommand}">
          <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
            <fluent:FluentIcon Icon="Video" IconVariant="Regular" IconSize="Size32"/>
            <TextBlock Classes="appTextBlock" Text="Rozpocznij analizę spotkania" VerticalAlignment="Center" FontSize="16"/>
          </StackPanel>
        </Button>
        <Button IsVisible="{Binding IsMetupAnalysisActive}" Background="#CE3F38" Classes="primary" HorizontalAlignment="Stretch" MinHeight="56" Command="{Binding StopAnalysisCommand}">
          <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
            <fluent:FluentIcon  Icon="VideoOff" IconVariant="Regular" IconSize="Size32"/>
            <TextBlock Classes="appTextBlock" Text="Zakończ analizę spotkania" VerticalAlignment="Center" FontSize="16"/>
          </StackPanel>
        </Button>

        <Border IsVisible="{Binding !IsMetupAnalysisActive}" Classes="card" Margin="0,6,0,0">
          <StackPanel>
            <TextBlock Classes="appTextBlock" Text="Analiza spotkania" FontSize="24" Foreground="{StaticResource PrimaryText}" FontWeight="SemiBold" Margin="0,0,0,10"/>
            <ItemsControl ItemsSource="{Binding PostAnalysisTips}">
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <StackPanel Orientation="Vertical" Spacing="10"/>
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>
              <ItemsControl.ItemTemplate>
                <DataTemplate DataType="system:String">
                  <Border Classes="smallcard">
                    <TextBlock Text="{Binding}" Classes="appTextBlock" TextWrapping="Wrap" Foreground="{StaticResource PrimaryText}" FontSize="16"/>
                  </Border>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
            <TextBlock Classes="appTextBlock" Text="Podsumowanie AI" FontSize="24" Foreground="{StaticResource PrimaryText}" FontWeight="SemiBold" Margin="0,0,0,10"/>
            <Border Classes="smallcard">
              <TextBlock Text="{Binding Summary}" Classes="appTextBlock" TextWrapping="Wrap" Foreground="{StaticResource PrimaryText}" FontSize="16"/>
            </Border>
          </StackPanel>
        </Border>
        <Border IsVisible="{Binding IsMetupAnalysisActive}" Classes="card" Margin="0,6,0,0">
          <StackPanel>
            <TextBlock Classes="appTextBlock" Text="Aktualne spotkanie" FontSize="24" Foreground="{StaticResource PrimaryText}" FontWeight="SemiBold" Margin="0,0,0,10"/>
            <StackPanel Orientation="Horizontal" Spacing="24" VerticalAlignment="Center">
              <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="12">
                <fluent:FluentIcon Icon="Timer" IconVariant="Regular" Foreground="{StaticResource PrimaryText}" IconSize="Size24"/>
                <TextBlock Classes="appTextBlock" Width="120" FontWeight="Bold" VerticalAlignment="Center" FontSize="32" Text="{Binding MeetupDuration}" Foreground="{StaticResource PrimaryText}"/>
              </StackPanel>
              <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="12">
                <fluent:FluentIcon Icon="Person" IconVariant="Regular" Foreground="{StaticResource PrimaryText}" IconSize="Size24"/>
                <TextBlock Classes="appTextBlock" FontWeight="Bold" VerticalAlignment="Center" FontSize="32" Text="{Binding NumberOfPeopleInMeetup}" Foreground="{StaticResource PrimaryText}"/>
              </StackPanel>
            </StackPanel>
            <Grid VerticalAlignment="Center"
                  HorizontalAlignment="Center"
                  Margin="24,24,24,24"
                  RowDefinitions="*,*"
                  ColumnDefinitions="*,*">
                <Grid.Styles >
                  <Style Selector="TextBlock.emotionText">
                    <Setter Property="Foreground" Value="{StaticResource PrimaryText}" />
                    <Setter Property="FontSize" Value="16" />
                    <Setter Property="Padding" Value="14,12" />
                  </Style>
                </Grid.Styles>
                <StackPanel  HorizontalAlignment="Center" Grid.Row="0" Grid.Column="0" >
                  <Lottie Path="/Assets/humi_neutral.json" />
                  <TextBlock HorizontalAlignment="Center" Classes="emotionText appTextBlock" Text="Neutralny"/>
                </StackPanel>
                <StackPanel  HorizontalAlignment="Center" Grid.Row="0" Grid.Column="1">
                  <Lottie Path="/Assets/humi_happy.json" />
                  <TextBlock HorizontalAlignment="Center" Classes="emotionText appTextBlock" Text="Szczęśliwy"/>
                </StackPanel>
                <StackPanel  HorizontalAlignment="Center" Grid.Row="1" Grid.Column="0">
                  <Lottie Path="/Assets/humi_sad.json" />
                  <TextBlock HorizontalAlignment="Center" Classes="emotionText appTextBlock" Text="Smutny"/>
                </StackPanel>
                <StackPanel  HorizontalAlignment="Center" Grid.Row="1" Grid.Column="1">
                  <Lottie Path="/Assets/humi_suprised.json" />
                  <TextBlock HorizontalAlignment="Center" Classes="emotionText appTextBlock" Text="Zaskoczony"/>
                </StackPanel>
            </Grid>
          </StackPanel>
        </Border>
      </StackPanel>

      <Border Grid.Column="1"/>

      <Border Grid.Column="2" Classes="card" Padding="20">
        <Grid RowDefinitions="Auto,Auto,Auto,*">          
          <TextBlock Grid.Row="0" Classes="appTextBlock" Text="Wykres emocji zespołu" FontSize="22" FontWeight="SemiBold" Foreground="{StaticResource PrimaryText}" />
          <TextBlock Grid.Row="1" Classes="appTextBlock" IsVisible="{Binding !IsMetupAnalysisActive}" Text="Wykres przedstawia procentowy udział emocji w wybranym spotkaniu."
                     Foreground="{StaticResource MutedText}" FontSize="13" Margin="0,6,0,14"/>
          <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center" Spacing="8" Margin="0,0,0,14">
            <ComboBox
              Width="220"
              Height="36"
              Background="#1E1E1E"
              Foreground="{StaticResource PrimaryText}"
              ItemsSource="{Binding AvailableDates}"
              SelectedItem="{Binding ChoosenDate, Mode=TwoWay}" />
          </StackPanel>
          <lvc:CartesianChart Grid.Row="3"
              LegendPosition="Hidden"
              MinWidth="100"
              MinHeight="430"
              Background="#2F2F2F"
              Series="{Binding Series}"
              XAxes="{Binding XAxes}"
              YAxes="{Binding YAxes}">
          </lvc:CartesianChart>
        </Grid>
      </Border>
    </Grid>
  </Grid>
</Window>
